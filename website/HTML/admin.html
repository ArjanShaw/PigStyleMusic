admin.html => <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - PigStyle Music</title>
    <link rel="icon" href="/static/images/PigStyle.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/static/css/admin.css">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <style>
        /* Status Badge Styles */
        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            text-transform: capitalize;
        }
        .status-badge.active { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .status-badge.new { background: #cce5ff; color: #004085; border: 1px solid #b8daff; }
        .status-badge.sold { background: #fff3cd; color: #856404; border: 1px solid #ffeeba; }
        .status-badge.removed { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .status-badge.pending { background: #fff3cd; color: #856404; border: 1px solid #ffeeba; }
        .status-badge.paid { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .status-badge.cancelled { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        
        /* Price Input Step Styling */
        input[type="number"][step="1"] {
            -moz-appearance: textfield;
        }
        input[type="number"][step="1"]::-webkit-inner-spin-button,
        input[type="number"][step="1"]::-webkit-outer-spin-button {
            opacity: 1;
            height: 24px;
        }

        /* Pagination Styles */
        .pagination-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding: 15px 0;
            border-top: 1px solid #ddd;
            flex-wrap: wrap;
            gap: 15px;
        }

        .pagination-info {
            color: #666;
            font-size: 14px;
        }

        .pagination-controls {
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
        }

        .pagination-btn {
            background: #f8f9fa;
            border: 1px solid #ddd;
            color: #333;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            min-width: 40px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .pagination-btn:hover:not(:disabled) {
            background: #e9ecef;
            border-color: #ccc;
        }

        .pagination-btn.active {
            background: #007bff;
            border-color: #0056b3;
            color: white;
        }

        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pagination-ellipsis {
            color: #666;
            padding: 0 5px;
        }

        .pagination-size-selector {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #666;
            font-size: 14px;
        }

        .pagination-size-selector select {
            background: white;
            border: 1px solid #ddd;
            color: #333;
            padding: 6px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .pagination-size-selector select:hover {
            background: #f8f9fa;
        }

        .pagination-size-selector select:focus {
            outline: none;
            border-color: #007bff;
        }

        @media (max-width: 768px) {
            .pagination-container {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .pagination-controls {
                width: 100%;
                justify-content: center;
            }
        }

        /* New Layout Styles */
        .dashboard-main {
            display: flex;
            flex-direction: column;
            gap: 30px;
            padding: 20px;
            background: white;
            color: #333;
        }

        .stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
            color: #007bff;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 14px;
        }

        .filters-section {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .filters-row {
            display: flex;
            gap: 30px;
            align-items: center;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .filter-group label {
            color: #333;
            font-weight: 600;
            font-size: 14px;
        }

        .filter-group select {
            background: white;
            border: 1px solid #ddd;
            color: #333;
            padding: 8px 12px;
            border-radius: 4px;
            min-width: 180px;
            cursor: pointer;
        }

        .status-filters {
            display: flex;
            gap: 15px;
        }

        .status-filter-checkbox {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #333;
            cursor: pointer;
        }

        .status-filter-checkbox input[type="checkbox"] {
            width: 16px;
            height: 16px;
            cursor: pointer;
        }

        .search-section {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .radio-group {
            display: flex;
            gap: 30px;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #333;
            cursor: pointer;
        }

        .radio-option input[type="radio"] {
            width: 16px;
            height: 16px;
            cursor: pointer;
        }

        .search-options-row {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .search-field-select {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #333;
        }

        .search-field-select select {
            background: white;
            border: 1px solid #ddd;
            color: #333;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .search-form {
            display: flex;
            gap: 10px;
            flex: 1;
            min-width: 300px;
        }

        .search-input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            color: #333;
            font-size: 14px;
        }

        .search-input:focus {
            outline: none;
            border-color: #007bff;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background: #0056b3;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #bd2130;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-warning {
            background: #ffc107;
            color: #333;
        }

        .btn-warning:hover {
            background: #e0a800;
        }

        .btn-info {
            background: #17a2b8;
            color: white;
        }

        .btn-info:hover {
            background: #138496;
        }

        .btn-small {
            padding: 5px 10px;
            font-size: 12px;
        }

        .inventory-table-container {
            overflow-x: auto;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .inventory-table {
            width: 100%;
            border-collapse: collapse;
        }

        .inventory-table th {
            text-align: left;
            padding: 12px;
            background: #f8f9fa;
            color: #333;
            font-weight: 600;
            border-bottom: 2px solid #ddd;
        }

        .inventory-table td {
            padding: 12px;
            border-bottom: 1px solid #eee;
            color: #333;
        }

        .inventory-table tr:hover {
            background: #f8f9fa;
        }

        .record-image-small {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 4px;
            background: #f8f9fa;
        }

        .table-actions {
            display: flex;
            gap: 8px;
        }

        .table-action-btn {
            background: none;
            border: none;
            color: #007bff;
            cursor: pointer;
            padding: 5px;
            font-size: 16px;
        }

        .table-action-btn:hover {
            color: #0056b3;
        }

        .table-action-btn.delete-btn {
            color: #dc3545;
        }

        .table-action-btn.delete-btn:hover {
            color: #bd2130;
        }

        .commission-badge {
            background: #28a745;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        .barcode-value {
            font-family: monospace;
            font-size: 12px;
            background: #f8f9fa;
            padding: 3px 6px;
            border-radius: 3px;
            color: #333;
        }

        .results-container {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .loading i {
            font-size: 48px;
            margin-bottom: 15px;
            color: #007bff;
        }

        .no-records {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .no-records i {
            font-size: 48px;
            margin-bottom: 15px;
            color: #999;
        }

        .record-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .record-header {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .record-image {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 4px;
            background: #f8f9fa;
        }

        .record-info {
            flex: 1;
        }

        .record-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .record-details {
            color: #666;
            font-size: 14px;
        }

        .record-details p {
            margin: 5px 0;
        }

        .genre-prediction {
            background: #f8f9fa;
            border-left: 4px solid #007bff;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .genre-prediction.prediction-available {
            border-left-color: #28a745;
            background: #f0f9f0;
        }

        .genre-prediction.prediction-success {
            border-left-color: #ffc107;
            background: #fff9e6;
        }

        .prediction-icon {
            font-size: 24px;
            color: #ffc107;
        }

        .prediction-text {
            flex: 1;
            color: #333;
        }

        .prediction-hint {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .accept-prediction-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .accept-prediction-btn:hover {
            background: #218838;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            position: relative;
        }

        .form-label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-size: 14px;
            font-weight: 600;
        }

        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            color: #333;
            font-size: 14px;
        }

        .form-control:focus {
            outline: none;
            border-color: #007bff;
        }

        .form-control.predicted-genre {
            border-color: #28a745;
            background: #f0f9f0;
        }

        .price-input {
            font-family: monospace;
            font-size: 16px;
        }

        .price-input.price-estimated {
            border-color: #28a745;
        }

        .estimation-hint {
            background: #f8f9fa;
            border-left: 4px solid #28a745;
            padding: 10px;
            margin-top: 10px;
            border-radius: 4px;
            font-size: 13px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .price-hint {
            color: #666;
            margin-top: 5px;
            font-size: 12px;
        }

        .barcode-info {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 20px;
            color: #666;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .calculation-container {
            margin: 15px 0;
        }

        .calculation-toggle {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #333;
        }

        .calculation-toggle:hover {
            background: #e9ecef;
        }

        .calculation-toggle.expanded i {
            transform: rotate(180deg);
        }

        .calculation-details {
            display: none;
            padding: 15px;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-top: 10px;
        }

        .calculation-details.expanded {
            display: block;
        }

        .calculation-content {
            font-size: 14px;
            color: #333;
        }

        .calculation-step {
            padding: 8px;
            margin: 5px 0;
            background: white;
            border-radius: 4px;
            border-left: 3px solid #007bff;
        }

        .price-source-badge {
            font-size: 11px;
            padding: 3px 6px;
            border-radius: 3px;
            font-weight: 600;
            margin-left: auto;
        }

        .price-source-badge.estimated {
            background: #ffc107;
            color: #333;
        }

        .price-source-badge.calculated {
            background: #28a745;
            color: white;
        }

        .rounding-info {
            background: #f8f9fa;
            border-left: 4px solid #007bff;
            padding: 15px;
            border-radius: 4px;
            color: #333;
        }

        .ebay-summary {
            margin-top: 20px;
        }

        .ebay-summary-table-container {
            overflow-x: auto;
            margin-top: 10px;
        }

        .ebay-summary-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 4px;
        }

        .ebay-summary-table th,
        .ebay-summary-table td {
            padding: 10px;
            text-align: left;
            border: 1px solid #ddd;
        }

        .ebay-summary-table th {
            background: #f8f9fa;
            color: #333;
            font-weight: 600;
        }

        .ebay-summary-table td {
            color: #333;
        }

        .ebay-listings {
            margin-top: 20px;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .table-header h4 {
            color: #333;
            margin: 0;
        }

        .table-count {
            background: #007bff;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        .table-scroll-container {
            overflow-x: auto;
            overflow-y: visible;
            max-width: 100%;
            border: 1px solid #eee;
            border-radius: 4px;
        }

        .ebay-listings-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 4px;
        }

        .ebay-listings-table th {
            background: #f8f9fa;
            color: #333;
            font-weight: 600;
            padding: 12px;
            text-align: left;
            border: 1px solid #ddd;
        }

        .ebay-listings-table td {
            padding: 12px;
            border: 1px solid #ddd;
            color: #333;
        }

        .ebay-listings-table tr.matches-condition {
            background: #f0f9f0;
        }

        .ebay-price {
            font-weight: bold;
            color: #28a745;
        }

        .ebay-shipping {
            color: #ffc107;
        }

        .ebay-total {
            font-weight: bold;
            color: #333;
        }

        .condition-match-badge {
            background: #28a745;
            color: white;
            padding: 2px 4px;
            border-radius: 2px;
            font-size: 10px;
            margin-left: 5px;
        }

        .ebay-condition {
            color: #333;
        }

        .ebay-title {
            max-width: 300px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: #333;
        }

        .ebay-link {
            color: #007bff;
            text-decoration: none;
        }

        .ebay-link:hover {
            text-decoration: underline;
        }

        .guest-message {
            display: none;
            text-align: center;
            padding: 60px 20px;
            background: white;
        }

        .login-prompt {
            max-width: 500px;
            margin: 0 auto;
            padding: 40px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        .login-prompt h1 {
            color: #333;
            margin-bottom: 20px;
        }

        .login-prompt p {
            color: #666;
            margin-bottom: 30px;
        }

        /* YouTube Linker Styles */
        .youtube-url-input {
            width: 250px;
            padding: 6px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 12px;
            transition: border-color 0.3s;
        }

        .youtube-url-input:focus {
            outline: none;
            border-color: #ff0000;
        }

        .selected-row {
            background-color: #fff3cd !important;
        }

        .selected-row:hover {
            background-color: #ffe69c !important;
        }

        #youtube-linker-table td {
            vertical-align: middle;
        }

        .record-image-small {
            width: 40px;
            height: 40px;
            object-fit: cover;
            border-radius: 4px;
        }

        .save-indicator {
            animation: fadeInOut 2s ease-in-out;
        }

        @keyframes fadeInOut {
            0% { opacity: 0; transform: scale(0.8); }
            20% { opacity: 1; transform: scale(1); }
            80% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(0.8); }
        }

        /* User Management Styles */
        .user-form-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 30px;
            color: white;
        }

        .user-form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .user-form-group {
            margin-bottom: 15px;
        }

        .user-form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.9);
        }

        .user-form-group input,
        .user-form-group select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            font-size: 14px;
        }

        .user-form-group input:focus,
        .user-form-group select:focus {
            outline: none;
            border-color: #ffd700;
            box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.3);
        }

        .password-strength {
            margin-top: 5px;
            font-size: 12px;
        }

        .strength-weak { color: #ff6b6b; }
        .strength-medium { color: #ffd93d; }
        .strength-strong { color: #6bcf7f; }

        .role-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .role-badge.admin { background: #dc3545; color: white; }
        .role-badge.consignor { background: #28a745; color: white; }
        .role-badge.youtube_linker { background: #ffc107; color: #333; }

        /* Flag Color Styles */
        .flag-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-transform: capitalize;
        }

        /* Price Checker Tab Styles */
        .price-checker-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }
        
        .price-checker-table th {
            background: #f8f9fa;
            padding: 12px;
            text-align: left;
            border-bottom: 2px solid #ddd;
        }
        
        .price-checker-table td {
            padding: 10px 12px;
            border-bottom: 1px solid #eee;
        }
        
        .price-checker-table tr:hover {
            background: #f5f5f5;
        }
        
        .status-badge.found {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status-badge.not-found {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status-badge.unique {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeeba;
        }
        
        .price-diff-positive {
            color: #28a745;
            font-weight: bold;
        }
        
        .price-diff-negative {
            color: #dc3545;
            font-weight: bold;
        }
        
        .progress-container {
            margin: 20px 0;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: #007bff;
            transition: width 0.3s;
        }
        
        .csv-preview {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-top: 15px;
        }
        
        .csv-preview table {
            width: 100%;
            font-size: 12px;
        }
        
        .csv-preview th {
            background: #f8f9fa;
            padding: 8px;
            position: sticky;
            top: 0;
        }
        
        .csv-preview td {
            padding: 6px 8px;
            border-bottom: 1px solid #eee;
        }

        /* Locator highlight styles */
        .record-locator-match {
            background-color: #fff3cd !important;
            border-left: 4px solid #ffc107 !important;
        }

        .record-locator-current {
            background-color: #cce5ff !important;
            border-left: 4px solid #007bff !important;
            box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
        }

        .record-locator-current td {
            background-color: #cce5ff !important;
        }

        .record-locator-match td {
            background-color: #fff3cd !important;
        }

        /* Locator search section */
        .locator-stats {
            background: #e9ecef;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 500;
        }

        #record-locator-search:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0,123,255,0.1);
        }

        /* Queue Styles */
        .queue-container {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-top: 20px;
            overflow: hidden;
        }

        .queue-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .queue-header h3 {
            margin: 0;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .queue-badge {
            background: rgba(255,255,255,0.2);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 14px;
        }

        .queue-content {
            max-height: 300px;
            overflow-y: auto;
            padding: 15px;
            background: #f8f9fa;
        }

        .queue-empty {
            text-align: center;
            padding: 30px;
            color: #999;
            font-style: italic;
        }

        .queue-item {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 12px 15px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 15px;
            animation: slideIn 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .queue-item:hover {
            background: #f0f7ff;
            border-color: #007bff;
        }

        .queue-item-number {
            background: #6c757d;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            flex-shrink: 0;
        }

        .queue-item-info {
            flex: 1;
            min-width: 0;
        }

        .queue-item-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .queue-item-details {
            font-size: 12px;
            color: #666;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .queue-item-price {
            font-weight: bold;
            color: #28a745;
        }

        .queue-item-remove {
            color: #dc3545;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 5px;
            background: none;
            border: 1px solid #dc3545;
            transition: all 0.2s;
        }

        .queue-item-remove:hover {
            background: #dc3545;
            color: white;
        }

        .queue-item-move {
            color: #007bff;
            cursor: pointer;
            padding: 5px 8px;
            border-radius: 4px;
            background: none;
            border: 1px solid #007bff;
            font-size: 12px;
            display: inline-flex;
            align-items: center;
            gap: 3px;
            margin-right: 5px;
        }

        .queue-item-move:hover {
            background: #007bff;
            color: white;
        }

        .queue-item-move:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            border-color: #ccc;
        }

        .queue-item-move:disabled:hover {
            background: none;
            color: #007bff;
        }

        .queue-actions {
            padding: 15px 20px;
            background: #f8f9fa;
            border-top: 1px solid #ddd;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .record-in-queue {
            background-color: #e8f4fd !important;
            border-left: 4px solid #007bff !important;
        }

        .record-in-queue td {
            background-color: #e8f4fd !important;
        }

        .record-queue-position {
            display: inline-block;
            background: #007bff;
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 5px;
            font-weight: bold;
        }

        .queue-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        /* Range selection styles */
        .range-mode-active .from-btn {
            background-color: #28a745 !important;
            color: white !important;
            border-color: #28a745 !important;
        }

        .range-mode-active .to-btn {
            background-color: #ffc107 !important;
            color: #333 !important;
            border-color: #ffc107 !important;
        }

        .from-btn.selected-from {
            background-color: #28a745 !important;
            color: white !important;
            border-color: #28a745 !important;
            font-weight: bold;
        }

        .to-btn {
            background-color: #6c757d !important;
            color: white !important;
        }

        .to-btn.selected-to {
            background-color: #ffc107 !important;
            color: #333 !important;
            border-color: #ffc107 !important;
            font-weight: bold;
        }

        @keyframes slideIn {
            from {
                transform: translateX(-10px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes pulse {
            0% { opacity: 0.6; }
            50% { opacity: 1; }
            100% { opacity: 0.6; }
        }

        /* Sort indicator styles */
        .sort-indicator {
            display: inline-block;
            margin-left: 5px;
            font-size: 12px;
        }

        th {
            cursor: pointer;
            user-select: none;
        }

        th:hover {
            background-color: #e9ecef;
        }

        /* Database Query Tab Styles */
        .db-query-container {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .db-tree-panel {
            flex: 0 0 300px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            max-height: 800px;
        }

        .db-tree-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .db-tree-header button {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .db-tree-header button:hover {
            background: rgba(255,255,255,0.3);
        }

        .db-tree-content {
            padding: 15px;
            overflow-y: auto;
            flex: 1;
        }

        .db-tree-item {
            margin-bottom: 5px;
        }

        .db-tree-table {
            font-weight: bold;
            cursor: pointer;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
        }

        .db-tree-table:hover {
            background: #e9ecef;
        }

        .db-tree-table i {
            color: #007bff;
            width: 20px;
        }

        .db-tree-table.expanded {
            background: #e3f2fd;
            border-left: 3px solid #007bff;
        }

        .db-tree-columns {
            margin-left: 20px;
            padding-left: 10px;
            border-left: 2px solid #ddd;
            display: none;
        }

        .db-tree-columns.expanded {
            display: block;
        }

        .db-tree-column {
            padding: 6px 8px;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .db-tree-column:hover {
            background: #f0f0f0;
        }

        .db-tree-column i {
            color: #28a745;
            width: 16px;
            font-size: 12px;
        }

        .db-tree-column .column-type {
            color: #999;
            font-size: 11px;
            margin-left: auto;
        }

        .db-query-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
            min-width: 0; /* Important for flex children to respect overflow */
        }

        .db-query-editor {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
        }

        .db-query-header {
            background: #f8f9fa;
            padding: 15px;
            border-bottom: 1px solid #ddd;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .db-query-header h3 {
            margin: 0;
            font-size: 16px;
            color: #333;
        }

        .db-query-actions {
            display: flex;
            gap: 10px;
        }

        .db-query-textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: none;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
            color: #333;
            background: #fafafa;
        }

        .db-query-textarea:focus {
            outline: none;
            background: white;
        }

        .db-query-info {
            padding: 10px 15px;
            background: #e3f2fd;
            border-top: 1px solid #ddd;
            font-size: 13px;
            color: #333;
            display: flex;
            gap: 20px;
        }

        .db-query-info span {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .db-query-info i {
            color: #007bff;
        }

        .db-results-panel {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            width: 100%;
        }

        .db-results-header {
            background: #f8f9fa;
            padding: 15px;
            border-bottom: 1px solid #ddd;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .db-results-header h3 {
            margin: 0;
            font-size: 16px;
            color: #333;
        }

        .db-results-stats {
            color: #28a745;
            font-weight: bold;
        }

        /* Fixed table container with horizontal scroll */
        .db-results-table-container {
            overflow-x: auto;
            overflow-y: auto;
            max-height: 500px;
            width: 100%;
            border: 1px solid #eee;
            border-radius: 4px;
        }

        .db-results-table {
            border-collapse: collapse;
            font-size: 13px;
            min-width: 100%; /* Ensures table fills container width */
            width: max-content; /* Allows table to expand beyond container */
        }

        .db-results-table th {
            background: #f8f9fa;
            padding: 12px 15px;
            text-align: left;
            border-bottom: 2px solid #ddd;
            position: sticky;
            top: 0;
            background: #f8f9fa;
            z-index: 10;
            font-weight: 600;
            color: #333;
            white-space: nowrap; /* Prevents header text from wrapping */
        }

        .db-results-table td {
            padding: 10px 15px;
            border-bottom: 1px solid #eee;
            color: #333;
            white-space: nowrap; /* Keeps data in one line for better scrolling */
            min-width: 100px; /* Minimum width for columns */
            max-width: 400px;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Allow certain columns to wrap if needed */
        .db-results-table td.wrap-content {
            white-space: normal;
            min-width: 200px;
        }

        .db-results-table tr:hover {
            background: #f5f5f5;
        }

        .db-results-table tr.modified-row {
            background: #fff3cd;
        }

        .db-results-table tr.deleted-row {
            background: #f8d7da;
            text-decoration: line-through;
        }

        .db-results-table tr.inserted-row {
            background: #d4edda;
        }

        .db-message {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 4px;
            color: #666;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .db-message.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .db-message.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .db-message.warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeeba;
        }

        .db-query-builder {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
        }

        .db-query-builder h4 {
            margin: 0 0 15px 0;
            color: #333;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .builder-fields {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .builder-field {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .builder-field label {
            font-size: 12px;
            color: #666;
            font-weight: 500;
        }

        .builder-field select,
        .builder-field input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 13px;
        }

        .sql-preview {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            margin-top: 10px;
            color: #333;
            white-space: pre-wrap;
            word-break: break-all;
        }
    </style>
</head>
<body>
    <nav style="background: #000; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; position: fixed; top: 0; left: 0; right: 0; z-index: 1000; border-bottom: 2px solid #ff6b6b;">
        <a href="/" style="color: white; text-decoration: none; font-size: 20px; font-weight: bold; display: flex; align-items: center; gap: 10px;">
            <img src="/static/images/PigStyle.ico" alt="PigStyle" style="height: 30px; width: 30px;">
        </a>
        <div style="display: flex; gap: 20px; align-items: center;">
            <a href="/inventory" style="color: white; text-decoration: none;">Inventory</a>
            <a href="/streaming" style="color: white; text-decoration: none;">Streaming</a>
            <a href="/consignment" style="color: white; text-decoration: none;">Consignment</a>
            <div id="auth-section"></div>
        </div>
    </nav>

    <div class="admin-container">
        <h1><i class="fas fa-cogs"></i> Admin Panel</h1>
        
        <div class="tab-container">
            <div class="tab" onclick="switchTab('add-edit-delete')">
                <i class="fas fa-edit"></i> Add/Edit/Delete
            </div>
            <div class="tab" onclick="switchTab('check-out')">
                <i class="fas fa-shopping-cart"></i> Check Out
            </div>
            <div class="tab" onclick="switchTab('receipts')">
                <i class="fas fa-receipt"></i> Receipts
            </div>
            <div class="tab" onclick="switchTab('users')">
                <i class="fas fa-users"></i> Users
            </div>
            <div class="tab" onclick="switchTab('artists')">
                <i class="fas fa-music"></i> Artists
            </div>
            <div class="tab" onclick="switchTab('accessories')">
                <i class="fas fa-headphones"></i> Accessories
            </div>
            <div class="tab" onclick="switchTab('youtube-linker')">
                <i class="fab fa-youtube" style="color: #ff0000;"></i> YouTube Linker
            </div>
            <div class="tab" onclick="switchTab('price-checker')">
                <i class="fas fa-chart-line"></i> Price Checker
            </div>
            <div class="tab" onclick="switchTab('admin-config')">
                <i class="fas fa-sliders-h"></i> Admin Config
            </div>
            <div class="tab" onclick="switchTab('price-tags')">
                <i class="fas fa-tags"></i> Print Price Tags
            </div>
            <div class="tab" onclick="switchTab('orders')">
                <i class="fas fa-shopping-bag"></i> Orders
            </div>
            <div class="tab" onclick="switchTab('db-query')">
                <i class="fas fa-database"></i> DB Query
            </div>
        </div>
        
        <!-- Add/Edit/Delete Tab -->
        <div id="add-edit-delete-tab" class="tab-content active">
            <div class="inventory-container">
                <div class="stats-row">
                    <div class="stat-card">
                        <div class="stat-value" id="total-records">0</div>
                        <div class="stat-label">Total Records</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="commission-rate">20.0%</div>
                        <div class="stat-label">Commission Rate</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="store-fill">0%</div>
                        <div class="stat-label">Store Fill</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="last-added">--</div>
                        <div class="stat-label">Last Added</div>
                    </div>
                </div>

                <div class="search-section">
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="searchType" value="add" checked>
                            Add Item (Search Discogs)
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="searchType" value="edit">
                            Edit or Delete Item
                        </label>
                    </div>

                    <div class="search-options-row">
                        <div class="search-field-select">
                            <label for="searchField"><i class="fas fa-search"></i> Search by:</label>
                            <select id="searchField" class="search-field-select">
                                <option value="all">Barcode, Artist, or Title</option>
                                <option value="barcode">Barcode</option>
                                <option value="artist">Artist</option>
                                <option value="title">Title</option>
                            </select>
                        </div>
                        
                        <form class="search-form" id="searchForm">
                            <input type="text" 
                                   class="search-input" 
                                   id="searchInput" 
                                   placeholder="Enter search term...">
                            <div class="action-buttons">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-search"></i> Search
                                </button>
                                <button type="button" class="btn btn-secondary" id="clearSearch">
                                    <i class="fas fa-times"></i> Clear
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <div id="results-container" class="results-container">
                    <div class="loading" id="default-loading">
                        <i class="fas fa-search"></i>
                        <p>Search for records to get started</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Check Out Tab -->
        <div id="check-out-tab" class="tab-content">
            <h2><i class="fas fa-shopping-cart"></i> Check Out</h2>
            
            <div class="terminal-management">
                <div class="terminal-header">
                    <h3><i class="fas fa-square"></i> Square Terminal Status</h3>
                    <button class="btn btn-secondary" onclick="refreshTerminals()">
                        <i class="fas fa-sync-alt"></i> Refresh Terminals
                    </button>
                </div>
                <div id="terminal-list" class="terminal-list">
                    <div style="text-align: center; padding: 20px; color: #666;">
                        <i class="fas fa-square" style="font-size: 24px; margin-bottom: 10px; color: #ccc;"></i>
                        <p>Click refresh to load available terminals</p>
                    </div>
                </div>
            </div>
            
            <!-- Custom Item Section -->
            <div class="custom-item-section" style="margin: 20px 0; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; color: white;">
                <h3 style="margin-bottom: 15px;"><i class="fas fa-plus-circle"></i> Add Custom Item</h3>
                <div style="display: flex; gap: 15px; flex-wrap: wrap; align-items: flex-end;">
                    <div style="flex: 2; min-width: 200px;">
                        <label for="custom-note" style="display: block; margin-bottom: 5px; font-size: 0.9rem;">Description/Note</label>
                        <input type="text" 
                               id="custom-note" 
                               class="search-input" 
                               placeholder="e.g., Gift card, Service, Donation..."
                               style="width: 100%; background: rgba(255,255,255,0.9);">
                    </div>
                    <div style="flex: 1; min-width: 150px;">
                        <label for="custom-price" style="display: block; margin-bottom: 5px; font-size: 0.9rem;">Price ($)</label>
                        <input type="number" 
                               id="custom-price" 
                               class="search-input" 
                               placeholder="0.00" 
                               min="0" 
                               step="0.01"
                               style="width: 100%; background: rgba(255,255,255,0.9);">
                    </div>
                    <div style="flex: 0 0 auto;">
                        <button class="btn btn-success" onclick="addCustomItemToCart()" style="height: 42px; padding: 0 25px; background: #ffd700; color: #333; border: none;">
                            <i class="fas fa-cart-plus"></i> Add to Cart
                        </button>
                    </div>
                </div>
                <p style="margin-top: 10px; font-size: 0.85rem; opacity: 0.9;">
                    <i class="fas fa-info-circle"></i> Add custom items like gift cards, services, or miscellaneous merchandise
                </p>
            </div>
            
            <div class="search-container">
                <div class="search-box">
                    <input type="text" id="search-query" class="search-input" 
                           placeholder="Search by barcode, title, artist, catalog number, or accessory description..." 
                           onkeypress="if(event.key === 'Enter') searchRecordsAndAccessories()">
                    <button class="btn btn-primary" onclick="searchRecordsAndAccessories()">
                        <i class="fas fa-search"></i> Search
                    </button>
                </div>
                
                <div class="search-filters">
                    <label class="search-filter-checkbox">
                        <input type="checkbox" id="filter-active" checked> 
                        <i class="fas fa-check-circle" style="color: #28a745;"></i> Active Only
                    </label>
                    <label class="search-filter-checkbox">
                        <input type="checkbox" id="filter-barcode"> 
                        <i class="fas fa-barcode"></i> Search Barcode Only
                    </label>
                    <span style="color: #666; margin-left: auto; display: flex; align-items: center;">
                        <i class="fas fa-info-circle"></i> 
                        <span style="margin-left: 5px;">Found <span id="search-result-count">0</span> results</span>
                    </span>
                </div>
            </div>
            
            <div id="checkout-status-message" class="status-message"></div>
            
            <div id="search-results-container">
                <div class="results-count" id="results-count-header">
                    Showing <span id="displayed-results">0</span> items
                </div>
                <div id="search-results" class="search-results">
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <i class="fas fa-search" style="font-size: 48px; margin-bottom: 20px; color: #ccc;"></i>
                        <p>Enter a search term to find records or accessories</p>
                    </div>
                </div>
            </div>
            
            <div id="shopping-cart-section" class="cart-section" style="display: none;">
                <div class="cart-header">
                    <h3><i class="fas fa-shopping-cart"></i> Shopping Cart</h3>
                    <span id="cart-item-count" class="badge" style="background: #3498db; color: white; padding: 5px 10px; border-radius: 20px;">0 items</span>
                </div>
                
                <div id="cart-items" class="cart-items"></div>
                
                <!-- Discount Field -->
                <div class="discount-section" style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 4px;">
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <div style="flex: 1;">
                            <label for="discount-amount" style="display: block; margin-bottom: 5px; font-weight: 500; color: #333;">
                                <i class="fas fa-tag"></i> Discount
                            </label>
                            <div style="display: flex; gap: 10px;">
                                <input type="number" 
                                       id="discount-amount" 
                                       class="discount-input" 
                                       placeholder="0.00" 
                                       min="0" 
                                       step="0.01"
                                       style="flex: 1; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px;"
                                       oninput="updateCartWithDiscount()">
                                <select id="discount-type" 
                                        class="discount-type-select"
                                        style="width: 100px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"
                                        onchange="updateCartWithDiscount()">
                                    <option value="fixed">$ Fixed</option>
                                    <option value="percentage" selected>% Off</option>
                                </select>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 12px; color: #666;">Discount Applied</div>
                            <div id="discount-display" style="font-weight: bold; color: #27ae60;">$0.00</div>
                        </div>
                    </div>
                    <div id="discount-error" style="color: #dc3545; font-size: 12px; margin-top: 5px; display: none;"></div>
                </div>
                
                <div class="cart-summary">
                    <div class="summary-row">
                        <span>Subtotal:</span>
                        <span id="cart-subtotal">$0.00</span>
                    </div>
                    <div class="summary-row" id="discount-row" style="display: none;">
                        <span>Discount:</span>
                        <span id="cart-discount" style="color: #27ae60;">-$0.00</span>
                    </div>
                    <div class="summary-row">
                        <span>Tax (<span id="tax-rate-display">0</span>%):</span>
                        <span id="cart-tax">$0.00</span>
                    </div>
                    <div class="summary-row total">
                        <span>Total:</span>
                        <span id="cart-total">$0.00</span>
                    </div>
                </div>
                
                <div class="cart-actions">
                    <button class="btn btn-secondary" onclick="clearCart()">
                        <i class="fas fa-times"></i> Clear Cart
                    </button>
                    <button class="btn btn-cash" onclick="showTenderModal()" id="checkout-cash-btn">
                        <i class="fas fa-money-bill-wave"></i> Cash
                    </button>
                    <button class="btn btn-square" onclick="processSquarePayment()" id="checkout-square-btn">
                        <i class="fas fa-square"></i> Square
                    </button>
                </div>
            </div>
            
            <div class="loading" id="checkout-loading">
                <div class="loading-spinner"></div>
                <p>Searching...</p>
            </div>
        </div>
        
        <!-- Receipts Tab -->
        <div id="receipts-tab" class="tab-content">
            <h2><i class="fas fa-receipt"></i> Receipt History</h2>
            
            <div class="receipt-stats" id="receipt-stats">
                <div class="receipt-stat-card">
                    <div class="receipt-stat-number" id="total-receipts">0</div>
                    <div class="receipt-stat-label">Total Receipts</div>
                </div>
                <div class="receipt-stat-card">
                    <div class="receipt-stat-number" id="total-receipts-sales">$0.00</div>
                    <div class="receipt-stat-label">Total Sales</div>
                </div>
                <div class="receipt-stat-card">
                    <div class="receipt-stat-number" id="total-receipts-tax">$0.00</div>
                    <div class="receipt-stat-label">Total Tax Collected</div>
                </div>
                <div class="receipt-stat-card">
                    <div class="receipt-stat-number" id="total-receipts-items">0</div>
                    <div class="receipt-stat-label">Items Sold</div>
                </div>
            </div>
            
            <div class="receipts-search">
                <h3><i class="fas fa-search"></i> Search Receipts</h3>
                <div class="date-range">
                    <div class="date-field">
                        <label for="receipt-start-date">From Date:</label>
                        <input type="date" id="receipt-start-date" class="date-input">
                    </div>
                    <div class="date-field">
                        <label for="receipt-end-date">To Date:</label>
                        <input type="date" id="receipt-end-date" class="date-input">
                    </div>
                    <div class="date-field">
                        <label for="receipt-search-query">Receipt # or Item:</label>
                        <input type="text" id="receipt-search-query" class="filter-select" placeholder="Search by artist, title, catalog #...">
                    </div>
                    <div class="filter-group">
                        <button class="btn btn-primary" onclick="searchReceipts()">
                            <i class="fas fa-search"></i> Search
                        </button>
                        <button class="btn btn-secondary" onclick="resetReceiptSearch()">
                            <i class="fas fa-undo"></i> Reset
                        </button>
                    </div>
                </div>
            </div>
            
            <div id="receipts-grid" class="receipts-grid">
                <!-- Receipts will be dynamically rendered here -->
            </div>
            
            <div class="loading" id="receipts-loading">
                <div class="loading-spinner"></div>
                <p>Loading receipts...</p>
            </div>
        </div>
        
        <!-- Users Tab (formerly Consignors) -->
        <div id="users-tab" class="tab-content">
            <h2><i class="fas fa-users"></i> User Management</h2>
            
            <!-- Add New User Form -->
            <div class="user-form-section">
                <h3 style="margin-bottom: 20px;"><i class="fas fa-user-plus"></i> Add New User</h3>
                
                <div class="user-form-grid">
                    <div class="user-form-group">
                        <label for="new-username">Username *</label>
                        <input type="text" id="new-username" placeholder="Enter username">
                    </div>
                    <div class="user-form-group">
                        <label for="new-email">Email *</label>
                        <input type="email" id="new-email" placeholder="Enter email">
                    </div>
                    <div class="user-form-group">
                        <label for="new-password">Password *</label>
                        <input type="password" id="new-password" placeholder="Enter password" onkeyup="checkPasswordStrength(this.value)">
                        <div id="password-strength" class="password-strength"></div>
                    </div>
                    <div class="user-form-group">
                        <label for="new-fullname">Full Name</label>
                        <input type="text" id="new-fullname" placeholder="Enter full name">
                    </div>
                    <div class="user-form-group">
                        <label for="new-initials">Initials</label>
                        <input type="text" id="new-initials" placeholder="e.g., ADB" maxlength="5">
                    </div>
                    <div class="user-form-group">
                        <label for="new-role">Role *</label>
                        <select id="new-role">
                            <option value="consignor">Consignor</option>
                            <option value="youtube_linker">YouTube Linker</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <div class="user-form-group">
                        <label for="new-flag-color">Flag Color</label>
                        <input type="text" id="new-flag-color" placeholder="e.g., blue, #ff0000, white_yellow">
                        <p class="hint" style="font-size: 12px; color: #666; margin-top: 5px;">
                            <i class="fas fa-info-circle"></i> Enter any color name or hex code
                        </p>
                    </div>
                </div>
                
                <div class="action-buttons" style="justify-content: flex-start;">
                    <button class="btn btn-success" onclick="createUser()">
                        <i class="fas fa-save"></i> Create User
                    </button>
                    <button class="btn btn-secondary" onclick="clearUserForm()">
                        <i class="fas fa-times"></i> Clear Form
                    </button>
                </div>
            </div>
            
            <!-- User Stats -->
            <div class="stats-grid" style="margin-bottom: 20px; display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
                <div class="stat-card">
                    <h3>Total Users</h3>
                    <p class="stat-number" id="total-users">0</p>
                </div>
                <div class="stat-card">
                    <h3>Total Owed to Consignors</h3>
                    <p class="stat-number" id="total-credit">$0.00</p>
                </div>
                <div class="stat-card">
                    <h3>Admin Commission</h3>
                    <p class="stat-number" id="admin-total-commission">$0.00</p>
                </div>
            </div>
            
            <!-- Users Table -->
            <div class="records-table-container">
                <table class="records-table" id="users-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Username</th>
                            <th>Email</th>
                            <th>Full Name</th>
                            <th>Initials</th>
                            <th>Role</th>
                            <th>Flag</th>
                            <th>Owed</th>
                            <th>Records Sold</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="users-body">
                        <tr><td colspan="10" style="text-align:center; padding:20px;">Loading users...</td></tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Payment Modal -->
            <div id="payment-modal" class="modal-overlay" style="display:none;">
                <div class="modal-content" style="max-width:400px;">
                    <div class="modal-header">
                        <h3 class="modal-title">Pay Consignor</h3>
                        <button class="modal-close" onclick="closePaymentModal()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <p>User: <strong id="payment-user-name"></strong></p>
                        <p>Amount Owed: <strong id="payment-amount">$0.00</strong></p>
                        <p>Are you sure you want to mark this amount as paid? This will clear their balance.</p>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closePaymentModal()">Cancel</button>
                        <button class="btn btn-success" onclick="processPayment()">Confirm Payment</button>
                    </div>
                </div>
            </div>
            
            <div class="loading" id="users-loading" style="display:none;">
                <div class="loading-spinner"></div>
                <p>Processing...</p>
            </div>
        </div>
        
        <!-- Artists Tab -->
        <div id="artists-tab" class="tab-content">
            <h2><i class="fas fa-music"></i> Artists by Record Count</h2>
            
            <div class="filter-controls" style="margin-bottom: 20px;">
                <div class="filter-group">
                    <label for="artist-search"><i class="fas fa-search"></i> Search Artist:</label>
                    <input type="text" id="artist-search" class="filter-select" placeholder="Type to filter..." onkeyup="filterArtists()" style="width: 250px;">
                </div>
                <div class="filter-group">
                    <button class="btn btn-secondary" onclick="loadArtists()">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
                <div class="filter-group" style="margin-left: auto;">
                    <span class="pagination-info">
                        Total Artists: <strong id="total-artists-count">0</strong>
                    </span>
                </div>
            </div>
            
            <div class="input-group" style="margin-bottom: 20px;">
                <label for="artist-batch-size"><i class="fas fa-sort-numeric-down"></i> Number of artists to print:</label>
                <input type="number" id="artist-batch-size" min="1" value="10">
                <small>Select the top artists by record count to print on price tag sheets</small>
            </div>
            
            <div class="records-table-container">
                <table class="records-table" id="artists-table">
                    <thead>
                        <tr>
                            <th><input type="checkbox" id="select-all-artists"></th>
                            <th>#</th>
                            <th>Artist Name</th>
                            <th>Record Count</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="artists-body">
                        <tr><td colspan="5" style="text-align:center; padding:40px;">
                            <i class="fas fa-music" style="font-size: 48px; margin-bottom: 20px; color: #ccc; display: block;"></i>
                            Loading artists...
                        </td></tr>
                    </tbody>
                </table>
            </div>
            
            <div class="pagination" id="artists-pagination" style="margin-top: 20px;">
                <button class="page-btn" onclick="goToArtistsPage('first')" id="artists-first-btn" disabled>
                    <i class="fas fa-angle-double-left"></i>
                </button>
                <button class="page-btn" onclick="goToArtistsPage('prev')" id="artists-prev-btn" disabled>
                    <i class="fas fa-angle-left"></i>
                </button>
                
                <span class="pagination-info">
                    Page <span id="artists-current-page">1</span> of <span id="artists-total-pages">1</span>
                </span>
                
                <button class="page-btn" onclick="goToArtistsPage('next')" id="artists-next-btn" disabled>
                    <i class="fas fa-angle-right"></i>
                </button>
                <button class="page-btn" onclick="goToArtistsPage('last')" id="artists-last-btn" disabled>
                    <i class="fas fa-angle-double-right"></i>
                </button>
                
                <div class="records-per-page">
                    <span>Show:</span>
                    <select id="artists-page-size" onchange="changeArtistsPageSize(parseInt(this.value))">
                        <option value="20">20</option>
                        <option value="50" selected>50</option>
                        <option value="100">100</option>
                    </select>
                </div>
            </div>
            
            <div class="action-buttons" style="margin-top: 20px;">
                <button class="btn btn-primary" onclick="loadArtists()">
                    <i class="fas fa-sync-alt"></i> Refresh Artists
                </button>
                <button class="btn btn-success" onclick="showPrintArtistsConfirmation()" id="print-artists-btn" disabled>
                    <i class="fas fa-print"></i> Print Selected Artists
                </button>
                <button class="btn btn-secondary" onclick="selectTopArtists()">
                    <i class="fas fa-check-square"></i> Select Top Artists
                </button>
                <button class="btn btn-secondary" onclick="selectAllArtistsOnPage()">
                    <i class="fas fa-check-double"></i> Select All on Page
                </button>
                <button class="btn btn-secondary" onclick="clearArtistSelection()">
                    <i class="fas fa-times-circle"></i> Clear Selection
                </button>
            </div>
            
            <div class="loading" id="artists-loading" style="display:none;">
                <div class="loading-spinner"></div>
                <p>Loading artists...</p>
            </div>
        </div>

        <!-- Accessories Tab -->
        <div id="accessories-tab" class="tab-content">
            <h2><i class="fas fa-headphones"></i> Accessories Management</h2>
            
            <div class="accessory-form" id="accessory-form" style="display: none;">
                <h3 id="form-title"><i class="fas fa-plus-circle"></i> Add New Accessory</h3>
                <div class="accessory-form-grid">
                    <div>
                        <label for="accessory-description">Description *</label>
                        <input type="text" id="accessory-description" placeholder="e.g., Turntable Belt, RCA Cables" required>
                    </div>
                    <div>
                        <label for="accessory-price">Store Price *</label>
                        <input type="number" id="accessory-price" step="0.01" min="0" placeholder="0.00" required>
                    </div>
                    <div>
                        <label for="accessory-count">Initial Count (optional)</label>
                        <input type="number" id="accessory-count" min="0" value="0" placeholder="0">
                    </div>
                </div>
                <div class="action-buttons" style="justify-content: flex-start; margin-top: 10px;">
                    <button class="btn btn-success" onclick="saveAccessory()">
                        <i class="fas fa-save"></i> Save Accessory
                    </button>
                    <button class="btn btn-secondary" onclick="cancelAccessoryForm()">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </div>
            
            <div class="action-buttons" style="margin-bottom: 20px;" id="add-new-btn-container">
                <button class="btn btn-primary" onclick="showAddAccessoryForm()">
                    <i class="fas fa-plus"></i> Add New Accessory
                </button>
                <button class="btn btn-secondary" onclick="loadAccessories()">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
                <button class="btn btn-success" onclick="printAccessoryBarcodes()">
                    <i class="fas fa-print"></i> Print Barcodes
                </button>
            </div>
            
            <div class="filter-controls" style="margin-bottom: 20px;">
                <div class="filter-group" style="flex: 1;">
                    <input type="text" id="accessory-search" class="filter-select" placeholder="Search by description or barcode..." onkeyup="filterAccessories()" style="width: 100%;">
                </div>
                <div class="filter-group">
                    <select id="stock-filter" class="filter-select" onchange="filterAccessories()">
                        <option value="all">All Stock</option>
                        <option value="low">Low Stock (&lt;=5)</option>
                        <option value="negative">Negative Stock</option>
                        <option value="in">In Stock (&gt;0)</option>
                    </select>
                </div>
            </div>
            
            <div class="accessories-table-container">
                <table class="accessories-table" id="accessories-table">
                    <thead>
                        <tr>
                            <th><input type="checkbox" id="select-all-accessories"></th>
                            <th>ID</th>
                            <th>Description</th>
                            <th>Barcode</th>
                            <th>Price</th>
                            <th>Count</th>
                            <th>Created</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="accessories-body">
                        <tr>
                            <td colspan="8" style="text-align: center; padding: 40px;">
                                <i class="fas fa-headphones" style="font-size: 48px; margin-bottom: 20px; color: #ccc; display: block;"></i>
                                Click "Add New Accessory" to get started
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="action-buttons" style="margin-top: 20px;">
                <button class="btn btn-primary" onclick="loadAccessories()">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
                <button class="btn btn-success" onclick="printAccessoryBarcodes()" id="print-accessories-btn" disabled>
                    <i class="fas fa-print"></i> Print Selected Barcodes
                </button>
                <button class="btn btn-secondary" onclick="selectAllAccessoriesOnPage()">
                    <i class="fas fa-check-double"></i> Select All on Page
                </button>
                <button class="btn btn-secondary" onclick="clearAccessorySelection()">
                    <i class="fas fa-times-circle"></i> Clear Selection
                </button>
            </div>
            
            <div class="loading" id="accessories-loading" style="display: none;">
                <div class="loading-spinner"></div>
                <p>Loading accessories...</p>
            </div>
        </div>

        <!-- YouTube Linker Tab -->
        <div id="youtube-linker-tab" class="tab-content">
            <h2><i class="fab fa-youtube" style="color: #ff0000;"></i> YouTube Linker</h2>
            
            <div class="info-message" style="background: #e3f2fd; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                <i class="fas fa-info-circle"></i> This tab shows active records without YouTube links. Add YouTube URLs to enable streaming previews.
            </div>
            
            <div class="stats-grid" style="margin-bottom: 20px;">
                <div class="stat-card">
                    <h3>Records Without YouTube</h3>
                    <p class="stat-number" id="total-without-youtube">0</p>
                </div>
                <div class="stat-card">
                    <h3>Selected Records</h3>
                    <p class="stat-number" id="selected-count">0</p>
                </div>
            </div>
            
            <div class="filter-controls" style="margin-bottom: 20px; display: flex; gap: 15px; flex-wrap: wrap; align-items: flex-end;">
                <div class="filter-group" style="flex: 2;">
                    <label for="youtube-linker-search"><i class="fas fa-search"></i> Search:</label>
                    <input type="text" id="youtube-linker-search" class="filter-select" placeholder="Search by artist or title..." onkeyup="searchYoutubeLinkerRecords()" style="width: 100%;">
                </div>
                <div class="filter-group" style="flex: 1;">
                    <label for="youtube-linker-filter"><i class="fas fa-filter"></i> Filter:</label>
                    <select id="youtube-linker-filter" class="filter-select" onchange="filterYoutubeLinkerRecords()" style="width: 100%;">
                        <option value="all">All Records</option>
                        <option value="no-youtube">No YouTube URL</option>
                    </select>
                </div>
            </div>
            
            <div class="bulk-update-section" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <h3 style="margin-bottom: 15px;"><i class="fas fa-layer-group"></i> Bulk Update</h3>
                <div style="display: flex; gap: 15px; flex-wrap: wrap; align-items: flex-end;">
                    <div style="flex: 2;">
                        <label for="bulk-youtube-url">YouTube URL:</label>
                        <input type="text" id="bulk-youtube-url" class="filter-select" placeholder="Enter YouTube URL to apply to all selected records" style="width: 100%;">
                    </div>
                    <div style="flex: 0 0 auto;">
                        <button class="btn btn-primary" onclick="bulkUpdateYoutubeUrls()">
                            <i class="fas fa-check-double"></i> Apply to Selected
                        </button>
                    </div>
                </div>
                <p class="info-message" style="margin-top: 10px; font-size: 12px;">
                    <i class="fas fa-info-circle"></i> Select records below, then enter a YouTube URL and click "Apply to Selected"
                </p>
            </div>
            
            <div class="records-table-container">
                <table class="records-table" id="youtube-linker-table">
                    <thead>
                        <tr>
                            <th><input type="checkbox" id="select-all-youtube" onclick="selectAllYoutubeLinkerPage()"></th>
                            <th>ID</th>
                            <th>Image</th>
                            <th>Artist</th>
                            <th>Title</th>
                            <th>Genre</th>
                            <th>Price</th>
                            <th>YouTube URL</th>
                            <th>Preview</th>
                        </tr>
                    </thead>
                    <tbody id="youtube-linker-body">
                        <!-- Records will be loaded here -->
                    </tbody>
                </table>
            </div>
            
            <div id="youtube-linker-empty" class="no-records" style="display: none;">
                <i class="fas fa-check-circle" style="font-size: 48px; margin-bottom: 15px; color: #28a745;"></i>
                <p>No records found without YouTube links!</p>
                <p><small>All active records have YouTube URLs assigned.</small></p>
            </div>
            
            <div class="pagination" id="youtube-linker-pagination" style="margin-top: 20px; display: none;">
                <button class="page-btn" onclick="goToYoutubeLinkerFirstPage()" id="youtube-linker-first-btn" disabled>
                    <i class="fas fa-angle-double-left"></i>
                </button>
                <button class="page-btn" onclick="goToYoutubeLinkerPrevPage()" id="youtube-linker-prev-btn" disabled>
                    <i class="fas fa-angle-left"></i>
                </button>
                
                <span class="pagination-info">
                    Page <span id="youtube-linker-current-page">1</span> of <span id="youtube-linker-total-pages">1</span>
                </span>
                
                <button class="page-btn" onclick="goToYoutubeLinkerNextPage()" id="youtube-linker-next-btn" disabled>
                    <i class="fas fa-angle-right"></i>
                </button>
                <button class="page-btn" onclick="goToYoutubeLinkerLastPage()" id="youtube-linker-last-btn" disabled>
                    <i class="fas fa-angle-double-right"></i>
                </button>
                
                <div class="records-per-page">
                    <span>Show:</span>
                    <select id="youtube-linker-page-size" onchange="changeYoutubeLinkerPageSize(parseInt(this.value))">
                        <option value="20">20</option>
                        <option value="50" selected>50</option>
                        <option value="100">100</option>
                    </select>
                </div>
            </div>
            
            <div class="action-buttons" style="margin-top: 20px;">
                <button class="btn btn-primary" onclick="loadYoutubeLinkerRecords()">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
                <button class="btn btn-secondary" onclick="selectAllYoutubeLinkerPage()">
                    <i class="fas fa-check-double"></i> Select All on Page
                </button>
                <button class="btn btn-secondary" onclick="clearYoutubeLinkerSelection()">
                    <i class="fas fa-times-circle"></i> Clear Selection
                </button>
            </div>
            
            <div class="loading" id="youtube-linker-loading" style="display: none;">
                <div class="loading-spinner"></div>
                <p>Loading records...</p>
            </div>
        </div>
        
        <!-- Price Checker Tab -->
        <div id="price-checker-tab" class="tab-content">
            <h2><i class="fas fa-chart-line"></i> Price Checker</h2>
            
            <div class="info-message" style="background: #e3f2fd; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                <i class="fas fa-info-circle"></i> Upload a CSV file with Artist, Title, Catalog#, and Price columns. The system will search Discogs for each item and show comparison data.
            </div>
            
            <!-- CSV Upload Section -->
            <div class="csv-upload-section" style="background: #f8f9fa; padding: 25px; border-radius: 8px; margin-bottom: 30px;">
                <h3 style="margin-bottom: 15px;"><i class="fas fa-upload"></i> Upload CSV File</h3>
                
                <div style="display: flex; gap: 20px; flex-wrap: wrap; align-items: flex-end;">
                    <div style="flex: 2;">
                        <label for="csv-file" style="display: block; margin-bottom: 5px; font-weight: 500;">Select CSV File:</label>
                        <input type="file" 
                               id="csv-file" 
                               accept=".csv, text/csv" 
                               class="filter-select" 
                               style="padding: 10px; background: white;">
                        <p class="hint" style="font-size: 12px; color: #666; margin-top: 5px;">
                            <i class="fas fa-info-circle"></i> CSV must have columns: Artist, Title, Catalog#, Price (headers optional)
                        </p>
                    </div>
                    
                    <div style="flex: 0 0 auto;">
                        <button class="btn btn-primary" onclick="uploadAndCheckPrices()" id="upload-btn">
                            <i class="fas fa-search"></i> Check Prices
                        </button>
                    </div>
                    
                    <div style="flex: 0 0 auto;">
                        <a href="#" 
                           class="btn btn-secondary"
                           onclick="downloadTemplate()">
                            <i class="fas fa-download"></i> Download Template
                        </a>
                    </div>
                </div>
                
                <div id="csv-preview" style="margin-top: 20px; display: none;">
                    <h4>CSV Preview</h4>
                    <div class="table-scroll-container" style="max-height: 200px; overflow-y: auto;">
                        <table class="ebay-listings-table" style="font-size: 12px;">
                            <thead>
                                <tr>
                                    <th>Artist</th>
                                    <th>Title</th>
                                    <th>Catalog #</th>
                                    <th>Your Price</th>
                                </tr>
                            </thead>
                            <tbody id="csv-preview-body">
                                <!-- Preview rows will be added here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Progress Section -->
            <div id="progress-section" style="display: none; margin-bottom: 20px;">
                <div class="progress-container" style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span><i class="fas fa-spinner fa-spin"></i> Processing...</span>
                        <span id="progress-count">0/0</span>
                    </div>
                    <div class="progress-bar" style="width: 100%; height: 20px; background: #e9ecef; border-radius: 10px; overflow: hidden;">
                        <div id="progress-fill" style="width: 0%; height: 100%; background: #007bff; transition: width 0.3s;"></div>
                    </div>
                    <div id="current-item" style="margin-top: 10px; font-size: 13px; color: #666;"></div>
                </div>
            </div>
            
            <!-- Stats Cards -->
            <div class="stats-grid" style="margin-bottom: 20px; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                <div class="stat-card">
                    <h3>Total Items</h3>
                    <p class="stat-number" id="total-items">0</p>
                </div>
                <div class="stat-card">
                    <h3>Found on Discogs</h3>
                    <p class="stat-number" id="found-items">0</p>
                </div>
                <div class="stat-card">
                    <h3>Unique to Your Collection</h3>
                    <p class="stat-number" id="unique-items">0</p>
                </div>
                <div class="stat-card">
                    <h3>Avg. Price Difference</h3>
                    <p class="stat-number" id="avg-diff">$0.00</p>
                </div>
            </div>
            
            <!-- Results Table -->
            <div id="results-table-container" style="display: none;">
                <div class="table-header">
                    <h3><i class="fas fa-table"></i> Price Comparison Results</h3>
                    <div>
                        <button class="btn btn-secondary btn-small" onclick="exportResultsToCSV()">
                            <i class="fas fa-download"></i> Export CSV
                        </button>
                    </div>
                </div>
                
                <div class="table-scroll-container">
                    <table class="price-checker-table" id="price-checker-table">
                        <thead>
                            <tr>
                                <th>Artist</th>
                                <th>Title</th>
                                <th>Catalog #</th>
                                <th>Your Price</th>
                                <th>Discogs Price</th>
                                <th>Difference</th>
                                <th>Status</th>
                                <th>Discogs Link</th>
                            </tr>
                        </thead>
                        <tbody id="price-checker-body">
                            <!-- Results will be added here -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="loading" id="price-checker-loading" style="display: none;">
                <div class="loading-spinner"></div>
                <p>Processing CSV and searching Discogs...</p>
            </div>
        </div>
        
        <!-- Admin Config Tab -->
        <div id="admin-config-tab" class="tab-content">
            <h2><i class="fas fa-sliders-h"></i> Admin Configuration</h2>
            
            <div class="admin-config-section">
                <h3><i class="fas fa-print"></i> Print Settings</h3>
                <p>Configuration values related to price tag printing.</p>
                
                <div class="records-table-container">
                    <table class="records-table" id="print-config-table">
                        <thead>
                            <tr>
                                <th>Configuration Key</th>
                                <th>Value</th>
                                <th>Description</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="print-config-body">
                            <!-- Print config values will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="admin-config-section" style="margin-top: 30px;">
                <h3><i class="fas fa-cog"></i> General Settings</h3>
                <p>Other system configuration values.</p>
                
                <div class="records-table-container">
                    <table class="records-table" id="general-config-table">
                        <thead>
                            <tr>
                                <th>Configuration Key</th>
                                <th>Value</th>
                                <th>Description</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="general-config-body">
                            <!-- General config values will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="admin-config-section" style="margin-top: 30px;">
                <h3><i class="fas fa-plus-circle"></i> Add New Configuration</h3>
                
                <div class="add-config-form">
                    <div class="filter-group">
                        <label for="new-config-key">Key:</label>
                        <input type="text" id="new-config-key" class="config-value-input" placeholder="e.g., NEW_SETTING">
                    </div>
                    <div class="filter-group">
                        <label for="new-config-value">Value:</label>
                        <input type="text" id="new-config-value" class="config-value-input" placeholder="Enter value">
                    </div>
                    <div class="filter-group">
                        <label for="new-config-description">Description:</label>
                        <input type="text" id="new-config-description" class="config-value-input" placeholder="What does this setting do?">
                    </div>
                    <div class="filter-group">
                        <label>&nbsp;</label>
                        <button class="btn btn-success" onclick="addNewConfig()">
                            <i class="fas fa-plus"></i> Add Configuration
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="action-buttons" style="margin-top: 20px;">
                <button class="btn btn-primary" onclick="loadConfigTables()">
                    <i class="fas fa-sync-alt"></i> Refresh Config
                </button>
            </div>
        </div>

        <!-- Price Tags Tab -->
        <div id="price-tags-tab" class="tab-content">
            <h2><i class="fas fa-tags"></i> Print Price Tags</h2>
            
            <!-- Filter Controls -->
            <div class="filter-controls" style="margin-bottom: 20px;">
                <div class="filter-group">
                    <label for="user-select"><i class="fas fa-user"></i> Select User:</label>
                    <select id="user-select" class="select2 filter-select" style="width: 250px;">
                        <option value="all">All Users</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="status-filter"><i class="fas fa-filter"></i> Filter by Status:</label>
                    <select id="status-filter" class="filter-select" onchange="filterRecords()">
                        <option value="all">All Statuses</option>
                        <option value="inactive">Inactive Only</option>
                        <option value="active">Active Only</option>
                        <option value="sold">Sold Only</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <button class="btn btn-secondary" onclick="loadRecordsForPriceTags()" style="height: 38px;">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
            </div>
            
            <!-- STATS CARDS - TOP -->
            <div class="stats-grid" style="margin-bottom: 20px; display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px;">
                <div class="stat-card" style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center;">
                    <h3 style="margin: 0 0 5px 0; font-size: 14px; color: #666;">Total Records</h3>
                    <p class="stat-number" id="total-records-print" style="font-size: 28px; font-weight: bold; color: #007bff; margin: 0;">0</p>
                </div>
                <div class="stat-card" style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center;">
                    <h3 style="margin: 0 0 5px 0; font-size: 14px; color: #666;">Inactive Records</h3>
                    <p class="stat-number" id="inactive-records" style="font-size: 28px; font-weight: bold; color: #dc3545; margin: 0;">0</p>
                </div>
                <div class="stat-card" style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center;">
                    <h3 style="margin: 0 0 5px 0; font-size: 14px; color: #666;">Active Records</h3>
                    <p class="stat-number" id="active-records" style="font-size: 28px; font-weight: bold; color: #28a745; margin: 0;">0</p>
                </div>
                <div class="stat-card" style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center;">
                    <h3 style="margin: 0 0 5px 0; font-size: 14px; color: #666;">Sold Records</h3>
                    <p class="stat-number" id="sold-records" style="font-size: 28px; font-weight: bold; color: #ffc107; margin: 0;">0</p>
                </div>
            </div>
            
            <!-- SEARCH SECTION - MIDDLE -->
            <div class="search-section" style="margin-bottom: 20px; background: #f0f7ff; border-left: 4px solid #007bff;">
                <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                    <div style="flex: 1; min-width: 300px;">
                        <label for="record-locator-search" style="display: block; margin-bottom: 5px; font-weight: 600; color: #007bff;">
                            <i class="fas fa-search-location"></i> Locate Record
                        </label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" 
                                   id="record-locator-search" 
                                   class="search-input" 
                                   placeholder="Search by artist, title, or barcode..."
                                   style="flex: 1;"
                                   onkeyup="locateRecord()">
                            <button class="btn btn-info" onclick="findNextMatch()" title="Find next match">
                                <i class="fas fa-arrow-down"></i> Find
                            </button>
                            <button class="btn btn-secondary" onclick="clearLocatorHighlight()" title="Clear highlights">
                                <i class="fas fa-times"></i> Clear
                            </button>
                        </div>
                    </div>
                    <div class="locator-stats" id="locator-stats" style="color: #666; font-size: 14px;">
                        <span id="match-count">0</span> matches found
                    </div>
                </div>
                <p class="hint" style="margin-top: 8px; font-size: 12px; color: #666;">
                    <i class="fas fa-info-circle"></i> 
                    Type to search - matching rows will be highlighted. Use the Find button to jump to the next match.
                </p>
            </div>
            
            <!-- Records Section -->
            <div id="records-section">
                <div class="pagination" id="pagination-controls" style="margin-bottom: 15px;">
                    <button class="page-btn" onclick="goToFirstPage()" id="first-page-btn" disabled>
                        <i class="fas fa-angle-double-left"></i>
                    </button>
                    <button class="page-btn" onclick="goToPreviousPage()" id="prev-page-btn" disabled>
                        <i class="fas fa-angle-left"></i>
                    </button>
                    
                    <span class="pagination-info">
                        Page <input type="number" class="page-input" id="current-page" min="1" value="1" 
                               onchange="goToPage(parseInt(this.value))" onblur="goToPage(parseInt(this.value))"> 
                        of <span id="total-pages">1</span>
                    </span>
                    
                    <button class="page-btn" onclick="goToNextPage()" id="next-page-btn" disabled>
                        <i class="fas fa-angle-right"></i>
                    </button>
                    <button class="page-btn" onclick="goToLastPage()" id="last-page-btn" disabled>
                        <i class="fas fa-angle-double-right"></i>
                    </button>
                    
                    <div class="records-per-page">
                        <span>Show:</span>
                        <select id="page-size" onchange="changePageSize(parseInt(this.value))">
                            <option value="50">50</option>
                            <option value="100" selected>100</option>
                            <option value="200">200</option>
                            <option value="500">500</option>
                        </select>
                        <span>records per page</span>
                    </div>
                </div>
                
                <div class="records-table-container">
                    <table class="records-table" id="records-table">
                        <thead>
                            <tr>
                                <th></th>
                                <th>#</th>
                                <th>Created Date</th>
                                <th>Artist</th>
                                <th>Title</th>
                                <th>Price</th>
                                <th>Catalog #</th>
                                <th>Genre</th>
                                <th>Barcode</th>
                                <th>Consignor</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="records-body">
                            <!-- Records will be loaded here -->
                        </tbody>
                    </table>
                </div>
                
                <div class="pagination" id="pagination-footer" style="margin-top: 15px;">
                    <span class="pagination-info">
                        Showing <span id="showing-start">0</span>-<span id="showing-end">0</span> 
                        of <span id="total-filtered">0</span> records
                    </span>
                </div>
                
                <div class="action-buttons" style="margin-top: 15px;">
                    <button class="btn btn-primary" onclick="loadRecordsForPriceTags()">
                        <i class="fas fa-sync-alt"></i> Refresh Records
                    </button>
                    <button class="btn btn-secondary" onclick="addAllOnPageToQueue()">
                        <i class="fas fa-plus-circle"></i> Add All on Page to Queue
                    </button>
                </div>
                
                <div id="status-message" class="status-message"></div>
                
                <div class="loading" id="loading">
                    <div class="loading-spinner"></div>
                    <p>Processing...</p>
                </div>
            </div>
            
            <!-- PRINT QUEUE SECTION - BOTTOM -->
            <div class="queue-container">
                <div class="queue-header">
                    <h3><i class="fas fa-list-ol"></i> Print Queue <span class="queue-badge" id="queue-count">0</span></h3>
                    <div class="queue-controls">
                        <button class="btn btn-small btn-secondary" onclick="clearQueue()" id="clear-queue-btn" disabled>
                            <i class="fas fa-trash"></i> Clear Queue
                        </button>
                    </div>
                </div>
                <div class="queue-content" id="queue-content">
                    <div class="queue-empty" id="queue-empty">
                        <i class="fas fa-inbox" style="font-size: 24px; margin-bottom: 10px; opacity: 0.5;"></i>
                        <p>No records in print queue</p>
                        <p style="font-size: 12px;">Click 'from' on a record to start a range selection</p>
                    </div>
                </div>
                <div class="queue-actions">
                    <button class="btn btn-success" onclick="showPrintConfirmation()" id="print-queue-btn" disabled>
                        <i class="fas fa-print"></i> Print Queue (<span id="print-queue-count">0</span>)
                    </button>
                    <button class="btn btn-warning" onclick="showMarkActiveConfirmation()" id="mark-active-queue-btn" disabled>
                        <i class="fas fa-check-circle"></i> Mark Queue as Active
                    </button>
                    <button class="btn btn-secondary" onclick="cancelRangeSelection()" id="cancel-range-btn" style="display: none;">
                        <i class="fas fa-times"></i> Cancel Range
                    </button>
                </div>
            </div>
        </div>

        <!-- Orders Tab -->
        <div id="orders-tab" class="tab-content">
            <h2><i class="fas fa-shopping-bag"></i> Order Management</h2>
            
            <!-- Stats Cards -->
            <div class="stats-grid" style="margin-bottom: 20px; display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px;">
                <div class="stat-card" style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center;">
                    <h3 style="margin: 0 0 5px 0; font-size: 14px; color: #666;">Total Orders</h3>
                    <p class="stat-number" id="total-orders" style="font-size: 28px; font-weight: bold; color: #007bff; margin: 0;">0</p>
                </div>
                <div class="stat-card" style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center;">
                    <h3 style="margin: 0 0 5px 0; font-size: 14px; color: #666;">Total Revenue</h3>
                    <p class="stat-number" id="total-revenue" style="font-size: 28px; font-weight: bold; color: #28a745; margin: 0;">$0.00</p>
                </div>
                <div class="stat-card" style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center;">
                    <h3 style="margin: 0 0 5px 0; font-size: 14px; color: #666;">Pending</h3>
                    <p class="stat-number" id="pending-orders" style="font-size: 28px; font-weight: bold; color: #ffc107; margin: 0;">0</p>
                </div>
                <div class="stat-card" style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center;">
                    <h3 style="margin: 0 0 5px 0; font-size: 14px; color: #666;">Paid</h3>
                    <p class="stat-number" id="paid-orders" style="font-size: 28px; font-weight: bold; color: #28a745; margin: 0;">0</p>
                </div>
            </div>
            
            <!-- Filters -->
            <div class="filter-controls" style="margin-bottom: 20px; display: flex; gap: 15px; flex-wrap: wrap; align-items: flex-end;">
                <div class="filter-group" style="flex: 2;">
                    <label for="orders-search"><i class="fas fa-search"></i> Search:</label>
                    <input type="text" id="orders-search" class="filter-select" placeholder="Search by order ID, customer, or items..." style="width: 100%;">
                </div>
                <div class="filter-group" style="flex: 1;">
                    <label for="orders-status-filter"><i class="fas fa-filter"></i> Status:</label>
                    <select id="orders-status-filter" class="filter-select" style="width: 100%;">
                        <option value="all">All Orders</option>
                        <option value="pending">Pending</option>
                        <option value="paid">Paid</option>
                        <option value="cancelled">Cancelled</option>
                    </select>
                </div>
                <div class="filter-group" style="flex: 0 0 auto;">
                    <button class="btn btn-primary" onclick="searchOrders()">
                        <i class="fas fa-search"></i> Search
                    </button>
                    <button class="btn btn-secondary" onclick="clearOrdersSearch()">
                        <i class="fas fa-times"></i> Clear
                    </button>
                </div>
            </div>
            
            <!-- Orders Table -->
            <div class="records-table-container">
                <table class="records-table" id="orders-table">
                    <thead>
                        <tr>
                            <th onclick="sortOrders('id')" id="sort-id" style="cursor: pointer;">ID <span class="sort-indicator"></span></th>
                            <th onclick="sortOrders('square_order_id')" id="sort-square_order_id" style="cursor: pointer;">Order ID</th>
                            <th onclick="sortOrders('created_at')" id="sort-created_at" style="cursor: pointer;">Date</th>
                            <th onclick="sortOrders('customer_email')" id="sort-customer_email" style="cursor: pointer;">Customer Email</th>
                            <th onclick="sortOrders('customer_name')" id="sort-customer_name" style="cursor: pointer;">Customer Name</th>
                            <th>Items</th>
                            <th onclick="sortOrders('total')" id="sort-total" style="cursor: pointer;">Total</th>
                            <th onclick="sortOrders('status')" id="sort-status" style="cursor: pointer;">Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="orders-body">
                        <!-- Orders will be loaded here -->
                    </tbody>
                </table>
                <div id="orders-empty" style="display: none; text-align: center; padding: 40px;">
                    <i class="fas fa-shopping-bag" style="font-size: 48px; margin-bottom: 15px; color: #ccc;"></i>
                    <p>No orders found</p>
                </div>
            </div>
            
            <!-- Pagination -->
            <div class="pagination" style="margin-top: 20px;">
                <button class="page-btn" onclick="goToOrdersPage(1)" id="orders-first-btn" disabled>
                    <i class="fas fa-angle-double-left"></i>
                </button>
                <button class="page-btn" onclick="goToOrdersPage(ordersCurrentPage - 1)" id="orders-prev-btn" disabled>
                    <i class="fas fa-angle-left"></i>
                </button>
                
                <span class="pagination-info">
                    Page <input type="number" class="page-input" id="orders-current-page" min="1" value="1" 
                           onchange="goToOrdersPage(parseInt(this.value))" onblur="goToOrdersPage(parseInt(this.value))" 
                           style="width: 50px; text-align: center;"> 
                    of <span id="orders-total-pages">1</span>
                </span>
                
                <button class="page-btn" onclick="goToOrdersPage(ordersCurrentPage + 1)" id="orders-next-btn" disabled>
                    <i class="fas fa-angle-right"></i>
                </button>
                <button class="page-btn" onclick="goToOrdersPage(Math.ceil(filteredOrders.length / ordersPageSize))" id="orders-last-btn" disabled>
                    <i class="fas fa-angle-double-right"></i>
                </button>
                
                <div class="records-per-page">
                    <span>Show:</span>
                    <select id="orders-page-size" onchange="changeOrdersPageSize(parseInt(this.value))">
                        <option value="10">10</option>
                        <option value="20" selected>20</option>
                        <option value="50">50</option>
                        <option value="100">100</option>
                    </select>
                </div>
            </div>
            
            <!-- Pagination Info -->
            <div style="margin-top: 10px; color: #666; font-size: 14px;">
                Showing <span id="orders-showing-start">0</span>-<span id="orders-showing-end">0</span> 
                of <span id="orders-total-filtered">0</span> orders
            </div>
            
            <!-- Action Buttons -->
            <div class="action-buttons" style="margin-top: 20px;">
                <button class="btn btn-primary" onclick="refreshOrders()">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
                <button class="btn btn-success" onclick="exportOrdersToCSV()">
                    <i class="fas fa-download"></i> Export to CSV
                </button>
            </div>
            
            <!-- Loading Indicator -->
            <div class="loading" id="orders-loading" style="display: none;">
                <div class="loading-spinner"></div>
                <p>Loading orders...</p>
            </div>
        </div>

        <!-- Database Query Tab -->
        <div id="db-query-tab" class="tab-content">
            <h2><i class="fas fa-database"></i> Database Query Tool</h2>
            
            <div class="info-message" style="background: #e3f2fd; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                <i class="fas fa-exclamation-triangle" style="color: #ffc107;"></i> 
                <strong>Warning:</strong> This tool allows direct database access. Be careful with UPDATE and DELETE statements. Always backup before making changes.
            </div>
            
            <div class="db-query-container">
                <!-- Database Tree Panel -->
                <div class="db-tree-panel">
                    <div class="db-tree-header">
                        <span><i class="fas fa-tree"></i> Database Schema</span>
                        <button onclick="refreshSchema()" title="Refresh Schema"><i class="fas fa-sync-alt"></i></button>
                    </div>
                    <div class="db-tree-content" id="schema-tree">
                        <div style="text-align: center; padding: 20px; color: #666;">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Loading schema...</p>
                        </div>
                    </div>
                </div>
                
                <!-- Query Panel -->
                <div class="db-query-panel">
                    <!-- Query Editor -->
                    <div class="db-query-editor">
                        <div class="db-query-header">
                            <h3><i class="fas fa-terminal"></i> SQL Query</h3>
                            <div class="db-query-actions">
                                <button class="btn btn-secondary btn-small" onclick="formatQuery()" title="Format SQL">
                                    <i class="fas fa-magic"></i> Format
                                </button>
                                <button class="btn btn-primary btn-small" onclick="executeQuery()" id="execute-query-btn">
                                    <i class="fas fa-play"></i> Execute (Ctrl+Enter)
                                </button>
                            </div>
                        </div>
                        <textarea id="sql-query" class="db-query-textarea" placeholder="Enter your SQL query here...&#10;Example: SELECT * FROM records LIMIT 10;" onkeydown="handleQueryKeydown(event)"></textarea>
                        <div class="db-query-info">
                            <span><i class="fas fa-table"></i> Supports: SELECT, INSERT, UPDATE, DELETE</span>
                            <span><i class="fas fa-history"></i> Query history: <span id="query-history-count">0</span></span>
                        </div>
                    </div>
                    
                    <!-- Quick Query Builder -->
                    <div class="db-query-builder" id="query-builder" style="display: none;">
                        <h4><i class="fas fa-tools"></i> Quick Query Builder</h4>
                        <div class="builder-fields">
                            <div class="builder-field">
                                <label>Operation</label>
                                <select id="builder-operation" onchange="updateBuilderFields()">
                                    <option value="select">SELECT</option>
                                    <option value="insert">INSERT</option>
                                    <option value="update">UPDATE</option>
                                    <option value="delete">DELETE</option>
                                </select>
                            </div>
                            <div class="builder-field">
                                <label>Table</label>
                                <select id="builder-table" onchange="updateBuilderFields()">
                                    <option value="">Select a table...</option>
                                </select>
                            </div>
                            <div class="builder-field" id="builder-columns-field" style="display: none;">
                                <label>Columns (comma-separated)</label>
                                <input type="text" id="builder-columns" placeholder="e.g., id, artist, title">
                            </div>
                            <div class="builder-field" id="builder-values-field" style="display: none;">
                                <label>Values (comma-separated)</label>
                                <input type="text" id="builder-values" placeholder="e.g., 1, 'Artist', 'Title'">
                            </div>
                            <div class="builder-field" id="builder-where-field" style="display: none;">
                                <label>WHERE clause</label>
                                <input type="text" id="builder-where" placeholder="e.g., id = 1">
                            </div>
                            <div class="builder-field" id="builder-set-field" style="display: none;">
                                <label>SET clause</label>
                                <input type="text" id="builder-set" placeholder="e.g., artist = 'New Artist'">
                            </div>
                        </div>
                        <div style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button class="btn btn-secondary btn-small" onclick="hideQueryBuilder()">Hide Builder</button>
                            <button class="btn btn-success btn-small" onclick="buildQuery()">Build Query</button>
                        </div>
                        <div id="builder-preview" class="sql-preview">
                            <!-- SQL preview will appear here -->
                        </div>
                    </div>
                    
                    <!-- Results Panel -->
                    <div class="db-results-panel">
                        <div class="db-results-header">
                            <h3><i class="fas fa-table"></i> Query Results</h3>
                            <div class="db-results-stats" id="results-stats">
                                Ready
                            </div>
                        </div>
                        <div id="query-results">
                            <div class="db-message">
                                <i class="fas fa-info-circle"></i>
                                <span>Execute a query to see results</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="print-confirmation-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-print"></i> Print Price Tags</h3>
                <button class="modal-close" onclick="closePrintConfirmation()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="print-summary">
                    <h4>Print Summary</h4>
                    <p>You are about to print price tags for <strong id="print-count">0</strong> records in the queue.</p>
                    <div id="print-summary-list" style="max-height: 200px; overflow-y: auto; margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 4px;">
                        <!-- Will be populated dynamically -->
                    </div>
                    <p>After printing successfully, you should mark these records as <strong>Active</strong> using the "Mark Queue as Active" button.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closePrintConfirmation()">Cancel</button>
                <button class="btn btn-success" onclick="confirmPrint()" id="confirm-print-btn">
                    <i class="fas fa-print"></i> Print Now
                </button>
            </div>
        </div>
    </div>

    <div id="mark-active-confirmation-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-check-circle"></i> Mark Queue as Active</h3>
                <button class="modal-close" onclick="closeMarkActiveConfirmation()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="print-summary">
                    <h4>Confirmation Required</h4>
                    <p>You are about to mark <strong id="mark-active-count">0</strong> records in the queue as <strong>Active</strong>.</p>
                    <div id="mark-active-summary-list" style="max-height: 200px; overflow-y: auto; margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 4px;">
                        <!-- Will be populated dynamically -->
                    </div>
                    <p><strong>Important:</strong> Only mark records as Active <em>after</em> you have successfully printed their price tags.</p>
                    <p>This will change their status from "Inactive" to "Active" in the system.</p>
                </div>
                <div class="confirmation-check">
                    <input type="checkbox" id="mark-active-confirmation-check">
                    <label for="mark-active-confirmation-check">I have successfully printed price tags for these records</label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeMarkActiveConfirmation()">Cancel</button>
                <button class="btn btn-warning" onclick="confirmMarkActive()" id="confirm-mark-active-btn" disabled>
                    <i class="fas fa-check-circle"></i> Mark as Active
                </button>
            </div>
        </div>
    </div>

    <div id="terminal-checkout-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-square"></i> Square Terminal Checkout</h3>
                <button class="modal-close" onclick="closeTerminalCheckoutModal()">&times;</button>
            </div>
            <div class="modal-body" id="terminal-checkout-body">
                <!-- Content will be dynamically populated -->
            </div>
        </div>
    </div>

    <div id="terminal-selection-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-square"></i> Select Terminal</h3>
                <button class="modal-close" onclick="closeTerminalSelectionModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="terminal-selection-list" class="terminal-device-selector">
                    <!-- Terminal selection will be populated here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeTerminalSelectionModal()">Cancel</button>
                <button class="btn btn-success" onclick="initiateCartTerminalCheckout()" id="confirm-terminal-btn" disabled>
                    <i class="fas fa-check-circle"></i> Start Checkout
                </button>
            </div>
        </div>
    </div>

    <div id="tender-modal" class="tender-modal">
        <div class="tender-content">
            <h3 style="text-align: center; margin-bottom: 20px;"><i class="fas fa-money-bill-wave"></i> Cash Payment</h3>
            
            <div style="text-align: center; margin-bottom: 10px;">Total Due:</div>
            <div class="tender-amount" id="tender-total-due">$0.00</div>
            
            <input type="number" id="tender-amount" class="tender-input" placeholder="Enter amount received" min="0" step="0.01" autofocus>
            
            <div id="change-display-container" style="display: none;">
                <div style="text-align: center; margin-bottom: 5px;">Change:</div>
                <div class="change-display" id="change-amount">$0.00</div>
            </div>
            
            <div class="action-buttons" style="justify-content: center; margin-top: 20px;">
                <button class="btn btn-secondary" onclick="closeTenderModal()">Cancel</button>
                <button class="btn btn-success" onclick="processCashPayment()" id="complete-payment-btn" disabled>
                    <i class="fas fa-check"></i> Complete Payment
                </button>
            </div>
        </div>
    </div>

    <div id="receipt-modal" class="receipt-modal">
        <div class="receipt-content" id="receipt-content">
            <!-- Receipt will be dynamically generated here -->
        </div>
    </div>

    <div id="print-artists-confirmation-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-print"></i> Print Artist Names</h3>
                <button class="modal-close" onclick="closePrintArtistsConfirmation()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="print-summary">
                    <h4>Print Summary</h4>
                    <p>You are about to print artist names for <strong id="print-artists-count">0</strong> selected artists.</p>
                    <ul id="print-artists-summary-list">
                        <!-- Will be populated dynamically -->
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closePrintArtistsConfirmation()">Cancel</button>
                <button class="btn btn-success" onclick="confirmPrintArtists()" id="confirm-print-artists-btn">
                    <i class="fas fa-print"></i> Print Now
                </button>
            </div>
        </div>
    </div>

    <div id="accessory-edit-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-edit"></i> Edit Accessory</h3>
                <button class="modal-close" onclick="closeAccessoryEditModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="accessory-form-grid">
                    <div style="grid-column: 1/-1;">
                        <label for="edit-accessory-description">Description *</label>
                        <input type="text" id="edit-accessory-description" class="filter-select" style="width: 100%;">
                    </div>
                    <div>
                        <label for="edit-accessory-price">Store Price *</label>
                        <input type="number" id="edit-accessory-price" step="0.01" min="0" class="filter-select">
                    </div>
                    <div>
                        <label for="edit-accessory-count">Count</label>
                        <input type="number" id="edit-accessory-count" min="0" class="filter-select">
                    </div>
                </div>
                
                <div class="barcode-preview" id="edit-barcode-preview">
                    <!-- Barcode will be shown here -->
                </div>
                
                <div class="info-message" style="background: #f8f9fa; padding: 10px; border-radius: 4px; margin-top: 10px;">
                    <i class="fas fa-info-circle"></i> Barcode is automatically generated and can't be edited directly. Click "Regenerate Barcode" to create a new one.
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="regenerateAccessoryBarcode()" id="regenerate-barcode-btn">
                    <i class="fas fa-sync-alt"></i> Regenerate Barcode
                </button>
                <button class="btn btn-secondary" onclick="closeAccessoryEditModal()">Cancel</button>
                <button class="btn btn-success" onclick="updateAccessory()">
                    <i class="fas fa-save"></i> Save Changes
                </button>
            </div>
        </div>
    </div>

    <div id="accessory-delete-modal" class="modal-overlay">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-exclamation-triangle" style="color: #dc3545;"></i> Confirm Delete</h3>
                <button class="modal-close" onclick="closeAccessoryDeleteModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this accessory?</p>
                <p><strong id="delete-accessory-description"></strong></p>
                <p class="info-message" style="background: #f8d7da; color: #721c24; padding: 10px; border-radius: 4px;">
                    <i class="fas fa-exclamation-circle"></i> This action cannot be undone.
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeAccessoryDeleteModal()">Cancel</button>
                <button class="btn btn-danger" onclick="confirmDeleteAccessory()">
                    <i class="fas fa-trash"></i> Delete
                </button>
            </div>
        </div>
    </div>

    <!-- Refund Modal (Enhanced) -->
    <div id="refund-modal" class="modal-overlay">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-undo-alt"></i> Process Refund</h3>
                <button class="modal-close" onclick="closeRefundModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="refund-receipt-info" style="background: #f8f9fa; padding: 15px; border-radius: 4px; margin-bottom: 20px;">
                    <!-- Receipt info will be populated here -->
                </div>
                
                <div id="refund-items-container" style="margin-bottom: 20px; max-height: 300px; overflow-y: auto;">
                    <!-- Items will be populated here -->
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label for="refund-terminal-select" style="display: block; margin-bottom: 5px; font-weight: 500;">
                        <i class="fas fa-square"></i> Select Terminal (for Square refunds):
                    </label>
                    <select id="refund-terminal-select" class="filter-select" style="width: 100%;">
                        <option value="">Loading terminals...</option>
                    </select>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label for="refund-amount" style="display: block; margin-bottom: 5px; font-weight: 500;">
                        Refund Amount:
                    </label>
                    <input type="number" 
                           id="refund-amount" 
                           class="tender-input" 
                           placeholder="0.00"
                           min="0.01"
                           step="0.01"
                           style="width: 100%;"
                           readonly>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label for="refund-reason" style="display: block; margin-bottom: 5px; font-weight: 500;">
                        Reason:
                    </label>
                    <select id="refund-reason" class="filter-select" style="width: 100%;">
                        <option value="Customer request">Customer request</option>
                        <option value="Defective item">Defective item</option>
                        <option value="Wrong item">Wrong item</option>
                        <option value="Customer changed mind">Customer changed mind</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                
                <div id="refund-error" class="status-message status-error" style="display: none;"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeRefundModal()">Cancel</button>
                <button class="btn btn-warning" onclick="processRefund()" id="process-refund-btn" disabled>
                    <i class="fas fa-undo"></i> Process Refund
                </button>
            </div>
        </div>
    </div>

    <div id="barcode-print-container" style="display: none;"></div>

    <!-- Scripts -->
    <script src="/static/js/app-config.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    
    <!-- Admin JavaScript Modules -->
    <script src="/static/js/utils.js"></script>
    <script src="/static/js/config-manager.js"></script>
    <script src="/static/js/config-value-manager.js"></script>
    <script src="/static/js/add-edit-delete-manager.js"></script>
    <script src="/static/js/price-tags.js"></script>
    <script src="/static/js/checkout.js"></script>
    <script src="/static/js/receipts.js"></script>
    <script src="/static/js/users.js"></script>
    <script src="/static/js/artists.js"></script>
    <script src="/static/js/accessories.js"></script>
    <script src="/static/js/refunds.js"></script>
    <script src="/static/js/youtube-linker.js"></script>
    <script src="/static/js/price-checker.js"></script>
    <script src="/static/js/admin-orders.js"></script>
    <script src="/static/js/db-query.js"></script>
    
    <!-- Config Initializer - Loads database config for all tabs -->
    <script>
    // Initialize global config object
    window.dbConfigValues = window.dbConfigValues || {};

    (async function initializePageConfig() {
        console.log(' Initializing global configuration for admin panel...');
        
        try {
            // Make sure AppConfig is available
            if (typeof AppConfig === 'undefined') {
                console.error('AppConfig not loaded yet, waiting...');
                await new Promise(resolve => setTimeout(resolve, 500));
            }
            
            let configLoaded = false;
            
            // Try fetchAllConfigValues if available
            if (typeof fetchAllConfigValues === 'function') {
                console.log('Loading config via fetchAllConfigValues()...');
                const config = await fetchAllConfigValues();
                if (config && Object.keys(config).length > 0) {
                    window.dbConfigValues = config;
                    configLoaded = true;
                    console.log(' Config loaded via fetchAllConfigValues, keys:', Object.keys(window.dbConfigValues));
                }
            } 
            
            // If not loaded, try direct API call
            if (!configLoaded) {
                console.log('Making direct API call to /config...');
                try {
                    const response = await fetch(`${AppConfig.baseUrl}/config`, {
                        credentials: 'include',
                        headers: AppConfig.getHeaders ? AppConfig.getHeaders() : {
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        }
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        
                        if (data.status === 'success') {
                            window.dbConfigValues = {};
                            
                            if (data.configs) {
                                Object.keys(data.configs).forEach(key => {
                                    window.dbConfigValues[key] = data.configs[key];
                                });
                            } else if (data.config) {
                                data.config.forEach(item => {
                                    window.dbConfigValues[item.config_key] = {
                                        value: item.config_value,
                                        description: item.description || ''
                                    };
                                });
                            }
                            
                            configLoaded = true;
                            console.log(' Config loaded via direct API call, keys:', Object.keys(window.dbConfigValues));
                        }
                    }
                } catch (directError) {
                    console.error('Direct API call failed:', directError);
                }
            }
            
            if (configLoaded) {
                console.log(' Configuration loaded successfully!');
                console.log('Config values:', window.dbConfigValues);
                
                // Dispatch event that config is ready
                window.dispatchEvent(new CustomEvent('configReady', {
                    detail: { config: window.dbConfigValues }
                }));
            } else {
                console.warn(' Could not load configuration.');
            }
            
        } catch (error) {
            console.error(' Failed to initialize configuration:', error);
        }
    })();

    // Safety check
    document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM fully loaded, checking config...');
        setTimeout(function() {
            if (!window.dbConfigValues || Object.keys(window.dbConfigValues).length === 0) {
                console.warn('Config still not loaded, attempting final reload...');
                if (typeof fetchAllConfigValues === 'function') {
                    fetchAllConfigValues().then(config => {
                        if (config) {
                            window.dbConfigValues = config;
                            console.log(' Config loaded on safety check, keys:', Object.keys(window.dbConfigValues));
                        }
                    }).catch(err => {
                        console.error('Safety check config load failed:', err);
                    });
                }
            } else {
                console.log(' Config verified, keys:', Object.keys(window.dbConfigValues));
            }
        }, 1000);
    });
    </script>
</body>
</html>